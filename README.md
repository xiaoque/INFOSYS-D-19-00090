# INFOSYS-D-19-00090


## Preparation Steps

* Create three tables using queries in `create tables.sql`
* Create a dimension view with hierarchy defined.
* Complete table `"SCH_COMP"."sap.hana.im.ess.eg.deploy.hier::ATTRIBUTE_GRAPH_NODES"` with attributes in the defined hierarchy.



## Computation Steps
* Run the procedure `COMPUTE_ATTRIBUTE_GRAPH.hdbprocedure` with input parameters: 1) **HIER_TABLE** which is the name of the hierarchy table generated by HANA; 2) **HIERARCHY_ID**
* The attribute graph will be stored in table `"SCH_COMP"."sap.hana.im.ess.eg.deploy.hier::ATTRIBUTE_GRAPH_EDGES" `.

## Example
Assuming a Dimension **TIME(DAY, MONTH, YEAR)** with hierarchy _time_ defined as: DAY -> MONTH -> YEAR, following tuples need to be inserted into table `"SCH_COMP"."sap.hana.im.ess.eg.deploy.hier::ATTRIBUTE_GRAPH_NODES"` :

| HIERARCHY_ID | NAME | LEVEL_NUM |
| :- | :- | :- |
| 1 | DAY | 3 |
| 1 | MONTH | 2|
| 1 | YEAR  | 1|

Run the procedure `COMPUTE_ATTRIBUTE_GRAPH.hdbprocedure` with input parameters: **HIER_TABLE = "_SYS_BIC"."hier_test/TIME/hier/time"** and **HIERARCHY_ID = 1**, and the table `"SCH_COMP"."sap.hana.im.ess.eg.deploy.hier::ATTRIBUTE_GRAPH_EDGES"`  will contain following tuples describing the attribute graph:

| HIERARCHY_ID | ATT_NAME | PARENT_ATT_NAME | LABEL |
| :-| :- | :- |:- |
|1 | DAY | MONTH | 'f' |
|1 | MONTH | YEAR | '+' |
|1 | DAY | YEAR | 'f' |


## Feature engineering scenario tables

The orginal PKDD'99 financial data can be downloaded: [here](https://sorry.vse.cz/~berka/challenge/PAST/index.html), we use a modified one: [download](https://drive.google.com/open?id=1KczF7rg6OHd7LaXZU16pCpeadacpHGXj)
